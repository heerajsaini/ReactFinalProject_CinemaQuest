{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport { useReducer, useEffect, useState, useRef, useCallback } from 'react';\nimport { apiGet } from './config';\n\nfunction showsReducer(prevState, action) {\n  switch (action.type) {\n    case 'ADD':\n      {\n        return [...prevState, action.showId];\n      }\n\n    case 'REMOVE':\n      {\n        return prevState.filter(showId => showId !== action.showId);\n      }\n\n    default:\n      return prevState;\n  }\n}\n\nfunction usePersistedReducer(reducer, initialState, key) {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState, initial => {\n    const persisted = localStorage.getItem(key);\n    return persisted ? JSON.parse(persisted) : initial;\n  });\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [state, key]);\n  return [state, dispatch];\n}\n\n_s(usePersistedReducer, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\nexport function useShows() {\n  _s2();\n\n  let key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'shows';\n  return usePersistedReducer(showsReducer, [], key);\n}\n\n_s2(useShows, \"O90laVLYFIRRSqN70E/CG1Sv5mg=\", false, function () {\n  return [usePersistedReducer];\n});\n\nexport function useLastQuery() {\n  _s3();\n\n  let key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'lastQuery';\n  const [input, setInput] = useState(() => {\n    const persisted = sessionStorage.getItem(key);\n    return persisted ? JSON.parse(persisted) : '';\n  });\n  const setPersistedInput = useCallback(newState => {\n    setInput(newState);\n    sessionStorage.setItem(key, JSON.stringify(newState));\n  }, [key]);\n  return [input, setPersistedInput];\n}\n\n_s3(useLastQuery, \"VTR7LsXL4n08ktXhn+QiRUa0uGo=\");\n\nconst reducer = (prevState, action) => {\n  switch (action.type) {\n    case 'FETCH_SUCCESS':\n      {\n        return {\n          isLoading: false,\n          error: null,\n          show: action.show\n        };\n      }\n\n    case 'FETCH_FAILED':\n      {\n        return { ...prevState,\n          isLoading: false,\n          error: action.error\n        };\n      }\n\n    default:\n      return prevState;\n  }\n};\n\nexport function useShow(showId) {\n  _s4();\n\n  const [state, dispatch] = useReducer(reducer, {\n    show: null,\n    isLoading: true,\n    error: null\n  });\n  useEffect(() => {\n    let isMounted = true;\n    apiGet(`/shows/${showId}?embed[]=seasons&embed[]=cast`).then(results => {\n      if (isMounted) {\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          show: results\n        });\n      }\n    }).catch(err => {\n      if (isMounted) {\n        dispatch({\n          type: 'FETCH_FAILED',\n          error: err.message\n        });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [showId]);\n  return state;\n}\n\n_s4(useShow, \"N2sWZufiQAlNXXaFS+rADjxvAUk=\");\n\nexport function useWhyDidYouUpdate(name, props) {\n  _s5();\n\n  // Get a mutable ref object where we can store props ...\n  // ... for comparison next time this hook runs.\n  const previousProps = useRef();\n  useEffect(() => {\n    if (previousProps.current) {\n      // Get all keys from previous and current props\n      const allKeys = Object.keys({ ...previousProps.current,\n        ...props\n      }); // Use this object to keep track of changed props\n\n      const changesObj = {}; // Iterate through keys\n\n      allKeys.forEach(key => {\n        // If previous is different from current\n        if (previousProps.current[key] !== props[key]) {\n          // Add to changesObj\n          changesObj[key] = {\n            from: previousProps.current[key],\n            to: props[key]\n          };\n        }\n      }); // If changesObj not empty then output to console\n\n      if (Object.keys(changesObj).length) {\n        console.log('[why-did-you-update]', name, changesObj);\n      }\n    } // Finally update previousProps with current props for next hook call\n\n\n    previousProps.current = props;\n  });\n}\n\n_s5(useWhyDidYouUpdate, \"zz+2if+2clo2TQRDbOCY+cjPsik=\");","map":{"version":3,"names":["useReducer","useEffect","useState","useRef","useCallback","apiGet","showsReducer","prevState","action","type","showId","filter","usePersistedReducer","reducer","initialState","key","state","dispatch","initial","persisted","localStorage","getItem","JSON","parse","setItem","stringify","useShows","useLastQuery","input","setInput","sessionStorage","setPersistedInput","newState","isLoading","error","show","useShow","isMounted","then","results","catch","err","message","useWhyDidYouUpdate","name","props","previousProps","current","allKeys","Object","keys","changesObj","forEach","from","to","length","console","log"],"sources":["D:/Projects/4thSemProject_REACT/Part2/cinemaquest/src/misc/custom-hooks.js"],"sourcesContent":["import { useReducer, useEffect, useState, useRef, useCallback } from 'react';\nimport { apiGet } from './config';\n\nfunction showsReducer(prevState, action) {\n  switch (action.type) {\n    case 'ADD': {\n      return [...prevState, action.showId];\n    }\n\n    case 'REMOVE': {\n      return prevState.filter(showId => showId !== action.showId);\n    }\n\n    default:\n      return prevState;\n  }\n}\n\nfunction usePersistedReducer(reducer, initialState, key) {\n  const [state, dispatch] = useReducer(reducer, initialState, initial => {\n    const persisted = localStorage.getItem(key);\n\n    return persisted ? JSON.parse(persisted) : initial;\n  });\n\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [state, key]);\n\n  return [state, dispatch];\n}\n\nexport function useShows(key = 'shows') {\n  return usePersistedReducer(showsReducer, [], key);\n}\n\nexport function useLastQuery(key = 'lastQuery') {\n  const [input, setInput] = useState(() => {\n    const persisted = sessionStorage.getItem(key);\n\n    return persisted ? JSON.parse(persisted) : '';\n  });\n\n  const setPersistedInput = useCallback(\n    newState => {\n      setInput(newState);\n      sessionStorage.setItem(key, JSON.stringify(newState));\n    },\n    [key]\n  );\n\n  return [input, setPersistedInput];\n}\n\nconst reducer = (prevState, action) => {\n  switch (action.type) {\n    case 'FETCH_SUCCESS': {\n      return { isLoading: false, error: null, show: action.show };\n    }\n\n    case 'FETCH_FAILED': {\n      return { ...prevState, isLoading: false, error: action.error };\n    }\n\n    default:\n      return prevState;\n  }\n};\n\nexport function useShow(showId) {\n  const [state, dispatch] = useReducer(reducer, {\n    show: null,\n    isLoading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    let isMounted = true;\n\n    apiGet(`/shows/${showId}?embed[]=seasons&embed[]=cast`)\n      .then(results => {\n        if (isMounted) {\n          dispatch({ type: 'FETCH_SUCCESS', show: results });\n        }\n      })\n      .catch(err => {\n        if (isMounted) {\n          dispatch({ type: 'FETCH_FAILED', error: err.message });\n        }\n      });\n\n    return () => {\n      isMounted = false;\n    };\n  }, [showId]);\n\n  return state;\n}\n\nexport function useWhyDidYouUpdate(name, props) {\n  // Get a mutable ref object where we can store props ...\n  // ... for comparison next time this hook runs.\n  const previousProps = useRef();\n\n  useEffect(() => {\n    if (previousProps.current) {\n      // Get all keys from previous and current props\n      const allKeys = Object.keys({ ...previousProps.current, ...props });\n      // Use this object to keep track of changed props\n      const changesObj = {};\n      // Iterate through keys\n      allKeys.forEach(key => {\n        // If previous is different from current\n        if (previousProps.current[key] !== props[key]) {\n          // Add to changesObj\n          changesObj[key] = {\n            from: previousProps.current[key],\n            to: props[key],\n          };\n        }\n      });\n\n      // If changesObj not empty then output to console\n      if (Object.keys(changesObj).length) {\n        console.log('[why-did-you-update]', name, changesObj);\n      }\n    }\n\n    // Finally update previousProps with current props for next hook call\n    previousProps.current = props;\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}